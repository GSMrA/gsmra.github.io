<!doctype html>
<html lang="fr">
<head>
<meta charset="utf-8" />
<meta name="viewport" content="width=device-width,initial-scale=1" />
<title>Mini Boom — jeu HTML5</title>
<style>
  body { margin:0; background:#111; color:#eee; font-family:Arial,Helvetica,sans-serif; display:flex; flex-direction:column; align-items:center; }
  #game { background:#0b1220; display:block; margin-top:16px; border:6px solid #222; border-radius:8px; }
  #ui { margin-top:8px; }
  button { padding:8px 12px; font-size:14px; }
</style>
</head>
<body>
<h1>Mini Boom — jeu original (exemple)</h1>
<canvas id="game" width="800" height="500"></canvas>
<div id="ui">
  <button id="restart">Recommencer</button>
  <span id="score">Score: 0</span>
  <span style="margin-left:16px" id="lives">Vies: 3</span>
</div>

<script>
// Jeu simple : bouger gauche/droite et tirer. Ennemis descendent.
// Variables
const canvas = document.getElementById('game');
const ctx = canvas.getContext('2d');
const W = canvas.width, H = canvas.height;
let keys = {};
let bullets = [];
let enemies = [];
let score = 0;
let lives = 3;
let gameOver = false;
let spawnTimer = 0;
const player = { x: W/2, y: H - 40, w: 50, h: 18, speed: 6 };

// Input
window.addEventListener('keydown', e=> keys[e.code]=true);
window.addEventListener('keyup', e=> keys[e.code]=false);

// Restart button
document.getElementById('restart').addEventListener('click', ()=> {
  score = 0; lives = 3; gameOver = false; bullets = []; enemies = []; spawnTimer = 0;
  document.getElementById('score').textContent = 'Score: 0';
  document.getElementById('lives').textContent = 'Vies: 3';
  loop();
});

// Bullet constructor
function shoot() {
  bullets.push({ x: player.x, y: player.y - 12, r: 4, dy: -9 });
}

// Enemy constructor
function spawnEnemy() {
  const ex = 20 + Math.random()*(W-40);
  const speed = 1 + Math.random()*1.6 + score*0.02;
  enemies.push({ x: ex, y: -20, r: 18, dy: speed });
}

// Collision simple
function distance(a,b){ return Math.hypot(a.x-b.x, a.y-b.y); }

// Update
function update() {
  if (gameOver) return;
  // Player movement
  if (keys['ArrowLeft'] || keys['KeyA']) player.x -= player.speed;
  if (keys['ArrowRight'] || keys['KeyD']) player.x += player.speed;
  if (keys['Space']) { if (shoot.cooldown<=0) { shoot(); shoot.cooldown = 12; } }
  if (shoot.cooldown>0) shoot.cooldown--;

  // Keep player in bounds
  player.x = Math.max(player.w/2, Math.min(W-player.w/2, player.x));

  // Update bullets
  for (let i=bullets.length-1;i>=0;i--){
    bullets[i].y += bullets[i].dy;
    if (bullets[i].y < -10) bullets.splice(i,1);
  }

  // Spawn enemies
  spawnTimer++;
  if (spawnTimer > Math.max(20, 80 - score*0.2)) { spawnEnemy(); spawnTimer = 0; }

  // Update enemies
  for (let i=enemies.length-1;i>=0;i--){
    enemies[i].y += enemies[i].dy;
    // Enemy reached bottom
    if (enemies[i].y > H + 30) {
      enemies.splice(i,1);
      lives--;
      document.getElementById('lives').textContent = 'Vies: ' + lives;
      if (lives <= 0) { gameOver = true; return; }
    }
  }

  // Collisions bullets <-> enemies
  for (let i=enemies.length-1;i>=0;i--){
    const e = enemies[i];
    for (let j=bullets.length-1;j>=0;j--){
      const b = bullets[j];
      if (distance(e,b) < e.r + b.r) {
        // hit
        enemies.splice(i,1);
        bullets.splice(j,1);
        score += 10;
        document.getElementById('score').textContent = 'Score: ' + score;
        break;
      }
    }
  }
}

// Draw
function draw() {
  // background
  ctx.clearRect(0,0,W,H);
  // draw player (simple cannon)
  ctx.save();
  ctx.translate(player.x, player.y);
  ctx.fillStyle = '#ffd166';
  ctx.fillRect(-player.w/2, -player.h/2, player.w, player.h);
  // barrel
  ctx.fillRect(-6, -player.h/2 - 16, 12, 16);
  ctx.restore();

  // bullets
  ctx.fillStyle = '#fff';
  bullets.forEach(b=>{
    ctx.beginPath();
    ctx.arc(b.x, b.y, b.r, 0, Math.PI*2);
    ctx.fill();
  });

  // enemies
  ctx.fillStyle = '#ef476f';
  enemies.forEach(e=>{
    ctx.beginPath();
    ctx.arc(e.x, e.y, e.r, 0, Math.PI*2);
    ctx.fill();
    // little teeth / spikes
    ctx.strokeStyle = '#b5174b';
    ctx.beginPath();
    ctx.moveTo(e.x - e.r/1.6, e.y - e.r/2);
    ctx.lineTo(e.x, e.y - e.r - 6);
    ctx.lineTo(e.x + e.r/1.6, e.y - e.r/2);
    ctx.stroke();
  });

  // HUD
  if (gameOver) {
    ctx.fillStyle = 'rgba(0,0,0,0.6)';
    ctx.fillRect(0,0,W,H);
    ctx.fillStyle = '#fff';
    ctx.font = '40px Arial';
    ctx.textAlign = 'center';
    ctx.fillText('Game Over', W/2, H/2 - 10);
    ctx.font = '20px Arial';
    ctx.fillText('Clique sur "Recommencer" pour rejouer', W/2, H/2 + 24);
  }
}

// Main loop
function loop() {
  update();
  draw();
  if (!gameOver) requestAnimationFrame(loop);
}
shoot.cooldown = 0;
loop();
</script>
</body>
</html>
