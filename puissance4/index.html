<!DOCTYPE html>
<html lang="fr">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Puissance 4 - 2 Joueurs</title>
    <style>
        body { font-family: Arial, sans-serif; text-align: center; background: #2c3e50; color: white; }
        #game { margin: 20px auto; border: 5px ridge #3498db; background: #3498db; border-radius: 10px; padding: 10px; }
        #game table { border-spacing: 0; margin: 0 auto; }
        #game td { width: 60px; height: 60px; border: 3px inset #3498db; border-radius: 50%; background: white; cursor: pointer; transition: background 0.3s; }
        #game td:hover { background: #ecf0f1; }
        #game td.player1 { background: #e74c3c; box-shadow: inset 0 0 10px rgba(0,0,0,0.5); }
        #game td.player2 { background: #f1c40f; box-shadow: inset 0 0 10px rgba(0,0,0,0.5); }
        #status { font-size: 24px; margin: 20px; }
        button { padding: 10px 20px; font-size: 18px; background: #27ae60; color: white; border: none; border-radius: 5px; cursor: pointer; }
        button:hover { background: #2ecc71; }
    </style>
</head>
<body>
    <h1>ðŸŸ¥ Puissance 4 ðŸŸ¨ - 2 Joueurs</h1>
    <div id="status">Tour du Joueur 1 (Rouge)</div>
    <div id="game">Activez JavaScript pour jouer.</div>
    <br><button onclick="location.reload()">Nouvelle Partie</button>

    <script>
        class Puissance4 {
            constructor(element_id, rows=6, cols=7) {
                this.rows = rows;
                this.cols = cols;
                this.board = Array(rows).fill().map(() => Array(cols).fill(0));
                this.turn = 1;
                this.moves = 0;
                this.winner = null;
                this.element = document.querySelector(element_id);
                this.status = document.getElementById('status');
                this.element.addEventListener('click', (e) => this.handle_click(e));
                this.render();
            }

            render() {
                const table = document.createElement('table');
                for (let i = this.rows - 1; i >= 0; i--) {
                    const tr = table.appendChild(document.createElement('tr'));
                    for (let j = 0; j < this.cols; j++) {
                        const td = tr.appendChild(document.createElement('td'));
                        const color = this.board[i][j];
                        if (color) td.className = 'player' + color;
                        td.dataset.column = j;
                    }
                }
                this.element.innerHTML = '';
                this.element.appendChild(table);

                if (this.winner === null) {
                    this.status.textContent = `Tour du Joueur ${this.turn} (${this.turn === 1 ? 'ðŸŸ¥ Rouge' : 'ðŸŸ¨ Jaune'})`;
                } else if (this.winner === 0) {
                    this.status.textContent = 'Partie Nulle ! ðŸŽ¯';
                } else {
                    this.status.textContent = `Joueur ${this.winner} Gagne ! ðŸ†`;
                }
            }

            set(row, col, player) {
                this.board[row][col] = player;
                this.moves++;
            }

            play(col) {
                for (let row = 0; row < this.rows; row++) {
                    if (this.board[row][col] === 0) {
                        this.set(row, col, this.turn);
                        return row;
                    }
                }
                return null;
            }

            win(row, col, player) {
                const dirs = [[0,1],[1,0],[1,1],[1,-1]];
                for (let [dr, dc] of dirs) {
                    let count = 1;
                    for (let k = 1; k < 4; k++) {
                        let r = row + dr * k, c = col + dc * k;
                        if (r < 0 || r >= this.rows || c < 0 || c >= this.cols || this.board[r][c] !== player) break;
                        count++;
                    }
                    for (let k = 1; k < 4; k++) {
                        let r = row - dr * k, c = col - dc * k;
                        if (r < 0 || r >= this.rows || c < 0 || c >= this.cols || this.board[r][c] !== player) break;
                        count++;
                    }
                    if (count >= 4) return true;
                }
                return false;
            }

            handle_click(e) {
                if (this.winner !== null) {
                    if (confirm('Partie terminÃ©e ! Recommencer ?')) this.reset();
                    return;
                }
                const col = parseInt(e.target.dataset.column);
                if (isNaN(col)) return;
                const row = this.play(col);
                if (row === null) {
                    alert('Colonne pleine !');
                    return;
                }
                if (this.win(row, col, this.turn)) {
                    this.winner = this.turn;
                } else if (this.moves >= this.rows * this.cols) {
                    this.winner = 0;
                } else {
                    this.turn = 3 - this.turn;
                }
                this.render();
            }

            reset() {
                this.board = Array(this.rows).fill().map(() => Array(this.cols).fill(0));
                this.turn = 1;
                this.moves = 0;
                this.winner = null;
                this.render();
            }
        }

        new Puissance4('#game'); [web:13][page:0]
    </script>
</body>
</html>
